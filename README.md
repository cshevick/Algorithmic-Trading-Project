# Pairs Trading Algorithm

A Python pairs trading application that identifies and exploits statistical relationships between two correlated stocks. The application fetches historical stock data using the Yahoo Finance API, calculates key statistics (mean, standard deviation, and regression coefficients), and saves these statistics in a Python script. It then uses QuantConnect with the generated statistics script to execute trades based on mean reversion in the price spread: the price difference between the two stocks will eventually revert to its historical mean, allowing the trades to profit from the adjustment. 

## API Usage

The application leverages the **Yahoo Finance API** via the `yfinance` library to fetch historical stock price data. The API provides adjusted closing prices for selected tickers, which are used for calculating the difference, regression, and other statistics required for pairs trading. 

## QuantConnect

QuantConnect lets you run live, real-time data into the algorithm and execute trades using fictional capital. The Quant Connect service works on a paid subscription basis that you would have to subscribe in order to run this part of the program. I utilized Quant Connect to backtest and execute the pairs trading strategy. The `trading_statistics.py` file generated by the program includes pre-calculated statistics (mean differences, standard deviations, etc.), which are imported into QuantConnect.

The script performs the following tasks:
1. Initializes two stocks using the statistics from the generated Python file.
2. Checks daily price movements of the selected stocks.
3. Executes trades if the price difference deviates significantly from the calculated mean, indicating a potential mean reversion opportunity.

### How It Works:
- If one stock is overvalued and the other is undervalued, the algorithm shorts the overvalued stock and buys the undervalued one.
- Allocation is based on the number of standard deviations from the mean difference.
- Trades are executed at the end of each day using QuantConnect's scheduled trading feature.

## Limitations
The current implementation executes trades at the end of each trading day, which limits its responsiveness to intra-day price movements that could create profitable opportunities. Real-time trading would be more efficient, as it could capitalize on deviations from the mean spread as they occur throughout the day. However, this limitation arises from the subscription plan used, which restricts real-time data access and the frequency of trades, making it necessary to rely on end-of-day price data.

## Installation

To run this project, clone the repository: https://github.com/cshevick/Algorithmic-Trading-Project.git
Then, install the necessary dependencies using pip: pip install yfinance pandas matplotlib scikit-learn numpy

## Usage
Run the script: Execute the main script in this repository to perform the statistical analysis. Enter the tickers for two correlated stocks (e.g., GOOG and GOOGL).
The program will fetch historical data, calculate key statistics, and output the results.

- Output Files:
    - A trading_statistics.py file will be generated, containing the mean difference, standard deviation, and regression coefficients.
    - Use with QuantConnect:
        - Upload the trading_statistics.py file and the QuantConnect script (MyAlgorithm) to your QuantConnect project.
        - Configure the start and end dates for backtesting.
        - Run the algorithm to simulate trades based on the calculated statistics.
    
- Visualize:
    - View matplotlib plots showing:
        - Regression analysis between the two stocks.
        - Price movements over time.
        - Differences with mean and standard deviation bands.
## License
- This project is open source and licensed under the MIT License. Feel free to modify and use the code as per your needs.
